import{r as M,a as h,c as v,b as l,d as X,w as k,v as C,e as le,t as T,f as ze,g as W,n as ie,F as j,h as K,i as Fe,j as He,o as Xe,k as je,l as Ke,m as N,p as Ze}from"./vue-vendor-DvzjMVvK.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const g of i.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();const b=M([]),m=M([]),S=M([]),Q=h(""),G=h(!1),R=M({strengths:"",weaknesses:"",opportunities:"",threats:""}),fe="hikki-canvas-state";function q(){try{const n={territories:JSON.parse(JSON.stringify(b)),nodes:JSON.parse(JSON.stringify(m)),edges:JSON.parse(JSON.stringify(S)),timestamp:Date.now()};localStorage.setItem(fe,JSON.stringify(n)),console.log("ðŸ’¾ Auto-saved canvas state")}catch(n){console.error("Auto-save failed:",n)}}function Qe(){try{const n=localStorage.getItem(fe);if(!n)return console.log("No saved state found"),!1;const e=JSON.parse(n);return b.splice(0),m.splice(0),S.splice(0),(e.territories||[]).forEach(s=>b.push(s)),(e.nodes||[]).forEach(s=>m.push(s)),(e.edges||[]).forEach(s=>S.push(s)),console.log("âœ… Auto-loaded canvas state from",new Date(e.timestamp).toLocaleString()),!0}catch(n){return console.error("Auto-load failed:",n),!1}}function ye(n){try{const e=localStorage.getItem("mvp-history"),s=e?JSON.parse(e):[],o={territories:JSON.parse(JSON.stringify(b)),nodes:JSON.parse(JSON.stringify(m)),edges:JSON.parse(JSON.stringify(S)),swot:{...R},ts:Date.now(),name:n};s.push({id:crypto.randomUUID(),ts:Date.now(),name:n||`snap-${s.length+1}`,data:o}),localStorage.setItem("mvp-history",JSON.stringify(s))}catch(e){throw console.error("Failed to save snapshot:",e),new Error(`Snapshot save failed: ${e.message}`)}}function _e(n){try{const e=localStorage.getItem("mvp-history");if(!e)throw new Error("No saved history found");const o=JSON.parse(e)[n];if(!o||!o.data)throw new Error(`Invalid snapshot at index ${n}`);b.splice(0),m.splice(0),S.splice(0),(o.data.territories||[]).forEach(r=>b.push(r)),(o.data.nodes||[]).forEach(r=>m.push(r)),(o.data.edges||[]).forEach(r=>S.push(r)),o.data.swot&&Object.assign(R,o.data.swot)}catch(e){throw console.error("Failed to load snapshot:",e),new Error(`Snapshot load failed: ${e.message}`)}}const P=20,me=60,V=180,J=80,he=20,pe=20,U=2,de=50,ce=3;function $e(n){const e=Math.ceil(n/U),s=P*2+U*V+(U-1)*he,o=me+P*2+e*J+(e-1)*pe;return{width:Math.max(s,400),height:Math.max(o,350)}}function eo(n,e,s){const o=s%U,r=Math.floor(s/U),i=e.x+P+o*(V+he),g=e.y+me+P+r*(J+pe),t=e.x+e.w-V-P,a=e.y+e.h-J-P,d=Math.min(i,t),f=Math.min(g,a);return(i!==d||g!==f)&&console.warn(`âš ï¸ Node "${n.label}" clamped in territory "${e.label}":`,{original:{x:i,y:g},clamped:{x:d,y:f},territory:{bounds:{x:e.x,y:e.y,w:e.w,h:e.h},maxAllowed:{x:t,y:a}}}),{x:d,y:f}}function oo(n){try{const e=m.findIndex(r=>r.id===n);if(e===-1)return console.warn(`Node ${n} not found`),!1;const s=m[e];console.log(`ðŸ—‘ï¸ Deleting node "${s.label}" (${n})`),m.splice(e,1);const o=S.filter(r=>r.source===n||r.target===n);return o.forEach(r=>{const i=S.findIndex(g=>g.id===r.id);i!==-1&&(S.splice(i,1),console.log(`  â†’ Removed edge ${r.id}`))}),b.forEach(r=>{if(r.nodeIds&&r.nodeIds.includes(n)){const i=r.nodeIds.indexOf(n);r.nodeIds.splice(i,1),console.log(`  â†’ Removed from territory "${r.label}"`)}}),q(),console.log(`âœ… Node deleted successfully (${o.length} edges removed)`),!0}catch(e){return console.error("Failed to delete node:",e),!1}}function to(){Q.value.toLowerCase().includes("ielts")?(R.strengths="Good listening",R.weaknesses="Timing in writing"):R.strengths="Creative",alert("SWOT drafted (stub).")}async function no(){var n;if(G.value){console.warn("Map generation already in progress");return}try{G.value=!0,console.log("ðŸš€ Starting map generation..."),b.splice(0),m.splice(0),S.splice(0);const e=await fetch("/api/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:Q.value||"Create a learning plan for IELTS preparation with listening, reading, writing, and speaking skills"})});if(!e.ok){const a=await e.json().catch(()=>null),d=(a==null?void 0:a.error)||`Server error: ${e.status}`;throw new Error(d)}const s=await e.json();if(!s.success)throw new Error(s.error||"Map generation failed");(n=s.metadata)!=null&&n.fallback&&(console.warn("âš ï¸ Using fallback map - LLM response was invalid"),alert("Warning: Map generation used fallback mode. Results may be limited."));const o=s.data,r=o.nodes.map(a=>({id:a.id||crypto.randomUUID(),label:a.label,type:a.type||"concept",note:"",status:"todo",timestamp:Date.now()})),i=o.edges.map(a=>({id:a.id||crypto.randomUUID(),source:a.source,target:a.target,type:a.type||"relationship"}));r.forEach(a=>m.push(a)),i.forEach(a=>S.push(a)),o.territories&&o.territories.length>0&&(console.log("ðŸ—ºï¸ Creating territories with dynamic sizing..."),o.territories.forEach((a,d)=>{const f=(a.nodeIds||[]).length,y=$e(f),D=d%ce,E=Math.floor(d/ce),I={id:a.id||crypto.randomUUID(),label:a.name,x:100+D*(y.width+de),y:100+E*(y.height+de),w:y.width,h:y.height,nodeIds:a.nodeIds||[]};b.push(I),console.log(`  ðŸ“¦ Territory "${I.label}":`,{nodes:f,dimensions:{w:y.width,h:y.height},position:{x:I.x,y:I.y}})})),console.log(`
ðŸ“ Positioning nodes within territories...`);let g=0,t=0;m.forEach(a=>{const d=b.find(f=>f.nodeIds&&f.nodeIds.includes(a.id));if(d){const f=d.nodeIds.indexOf(a.id),y=eo(a,d,f);a.x=y.x,a.y=y.y,g++,a.x>=d.x&&a.x+V<=d.x+d.w&&a.y>=d.y&&a.y+J<=d.y+d.h||console.error(`âŒ Node "${a.label}" STILL outside territory "${d.label}"!`,{node:{x:a.x,y:a.y},territory:{x:d.x,y:d.y,w:d.w,h:d.h}})}else a.x=Math.random()*800+100,a.y=Math.random()*600+100,t++,console.warn(`âš ï¸ Node "${a.label}" has no territory assignment`)}),console.log(`âœ“ Positioned ${g} nodes, ${t} outside territories`),ye("auto-generate"),q(),console.log("âœ… Map generation complete!"),console.log(`   â†’ ${b.length} territories`),console.log(`   â†’ ${m.length} nodes`),console.log(`   â†’ ${S.length} edges`)}catch(e){console.error("âŒ Map generation failed:",e);let s="Failed to generate map. ";throw e.message.includes("Rate limit")||e.message.includes("busy")?s+="The AI service is currently busy. Please wait a moment and try again.":e.message.includes("API key")||e.message.includes("not configured")?s+="API configuration error. Please check your API keys.":e.message.includes("Invalid map structure")?s+="The AI returned an invalid response. Please try a different prompt.":s+=e.message,alert(s),e}finally{G.value=!1}}function so(){return{territories:b,nodes:m,edges:S,chatInput:Q,swot:R,isGenerating:G,saveSnapshot:ye,loadSnapshot:_e,runAnalysis:to,generateMap:no,autoSave:q,autoLoad:Qe,deleteNode:oo}}const A=M({x:0,y:0,w:1600,h:900}),c=M({x:A.x,y:A.y,w:A.w,h:A.h}),z=h(!1),L=M({x:0,y:0});function _(n){const e=document.querySelector("svg");if(!e)return console.warn("SVG element not found"),{x:0,y:0};const s=e.getBoundingClientRect(),o=(n.clientX-s.left)/s.width,r=(n.clientY-s.top)/s.height;return{x:c.x+o*c.w,y:c.y+r*c.h}}function ro(n){const e=document.querySelector("svg");if(!e)return console.warn("SVG element not found"),{x:0,y:0,rect:null};const s=e.getBoundingClientRect(),o=(n.x-c.x)/c.w*s.width+s.left,r=(n.y-c.y)/c.h*s.height+s.top;return{x:o,y:r,rect:s}}function ao(n){z.value=!0,L.x=n.clientX,L.y=n.clientY}function lo(n){if(!z.value)return;const e=n.currentTarget,s=(n.clientX-L.x)*(c.w/e.clientWidth),o=(n.clientY-L.y)*(c.h/e.clientHeight);c.x-=s,c.y-=o,L.x=n.clientX,L.y=n.clientY}function io(){z.value=!1}const co=n=>{const s=n.currentTarget.getBoundingClientRect(),o=n.clientX-s.left,r=n.clientY-s.top,i=n.deltaY<0?.9:1.1,g=c.x+o/s.width*c.w,t=c.y+r/s.height*c.h,a=c.w*i,d=c.h*i;c.x=g-o/s.width*a,c.y=t-r/s.height*d,c.w=a,c.h=d};function uo(n,e=2,s=300){const o={x:c.x,y:c.y,w:c.w,h:c.h},r=n.x,i=n.y,g=A.w/e,t=A.h/e,a={x:r-g/2,y:i-t/2,w:g,h:t},d=performance.now();function f(y){const D=Math.min(1,(y-d)/s),E=1-Math.pow(1-D,2);c.x=o.x+(a.x-o.x)*E,c.y=o.y+(a.y-o.y)*E,c.w=o.w+(a.w-o.w)*E,c.h=o.h+(a.h-o.h)*E,D<1&&requestAnimationFrame(f)}requestAnimationFrame(f)}function go(){return{viewBox:c,isPanning:z,onPanStart:ao,onPanMove:lo,onPanEnd:io,onWheel:co,svgToWorld:_,worldToScreen:ro,zoomToNode:uo}}const ue=180,ge=80,Y=20,$=h(null),Z=h(""),ee=h(null),w=M({active:!1,id:null,ox:0,oy:0});function fo(n){return m.find(e=>e.id===n)}function yo(n){$.value=n,ee.value=n}function mo(){$.value=null,ee.value=null}function ho(){const n=Z.value.trim();if(!n){console.warn("Cannot add node with empty label");return}const s={id:crypto.randomUUID(),label:n,x:c.x+c.w/2,y:c.y+c.h/2,territoryId:null,note:"",status:"todo",timestamp:Date.now()};m.push(s),Z.value=""}const po=(n,e)=>{n.stopPropagation();const s=_(n);w.active=!0,w.id=e.id,w.ox=s.x-e.x,w.oy=s.y-e.y,window.addEventListener("mousemove",oe),window.addEventListener("mouseup",te)},oe=n=>{if(!w.active||!w.id)return;const e=_(n),s=m.find(g=>g.id===w.id);if(!s)return;let o=e.x-w.ox,r=e.y-w.oy;const i=b.find(g=>g.nodeIds&&g.nodeIds.includes(s.id));if(i){const g=i.x+Y,t=i.y+60+Y,a=i.x+i.w-ue/2-Y,d=i.y+i.h-ge/2-Y;o=Math.max(g+ue/2,Math.min(o,a)),r=Math.max(t+ge/2,Math.min(r,d)),(o!==e.x-w.ox||r!==e.y-w.oy)&&!s._boundaryWarned&&(console.log(`ðŸš§ Node "${s.label}" constrained to territory "${i.label}"`),s._boundaryWarned=!0)}s.x=o,s.y=r},te=n=>{if(w.id){const e=m.find(s=>s.id===w.id);e&&delete e._boundaryWarned}w.active=!1,w.id=null,window.removeEventListener("mousemove",oe),window.removeEventListener("mouseup",te),q()};function wo(){return{selectedNode:$,quickNodeLabel:Z,editingNode:ee,dragging:w,nodeById:fo,selectNode:yo,deselectNode:mo,quickAddNode:ho,onNodeDragStart:po,onNodeDragMove:oe,onNodeDragEnd:te}}const xo=(n,e)=>{const s=n.__vccOpts||n;for(const[o,r]of e)s[o]=r;return s},vo={name:"App",setup(){const n=h(null),e=(u,x="")=>{console.error(`[App Error] ${x}:`,u),n.value=`${x}: ${u.message||u}`,setTimeout(()=>{n.value=null},5e3)},s=()=>{n.value=null},o=h({visible:!1,x:0,y:0,node:null});Xe((u,x,O)=>(e(u,`Component error (${O})`),!1));let r,i,g;try{r=so(),i=go(),g=wo()}catch(u){e(u,"Composable initialization failed"),r={territories:h([]),nodes:h([]),edges:h([]),chatInput:h(""),swot:h({})},i={viewBox:h({x:0,y:0,w:1600,h:900}),isPanning:h(!1)},g={selectedNode:h(null),quickNodeLabel:h("")}}const{territories:t,nodes:a,edges:d,chatInput:f,swot:y,isGenerating:D,runAnalysis:E,generateMap:I,saveSnapshot:we,loadSnapshot:xe,autoLoad:F,deleteNode:ve}=r,{viewBox:p,isPanning:Ne,onPanStart:be,onPanMove:Se,onPanEnd:Ie,onWheel:ke,svgToWorld:Fo,worldToScreen:Ho,zoomToNode:Ee}=i,{selectedNode:B,quickNodeLabel:Ce,editingNode:Me,dragging:Xo,nodeById:De,selectNode:Oe,deselectNode:se,quickAddNode:Te,onNodeDragStart:Pe,onNodeDragMove:Ae,onNodeDragEnd:Le}=g,Re=je(()=>(100*(1600/p.w)).toFixed(0)),Ue=()=>{try{we(`manual-${Date.now()}`),console.log("âœ“ State saved successfully")}catch(u){e(u,"Save failed")}},Be=()=>{try{xe(0),console.log("âœ“ State loaded successfully")}catch(u){e(u,"Load failed")}},We=()=>{try{confirm("Reset all data? This cannot be undone.")&&(t.splice(0),a.splice(0),d.splice(0),f.value="",y.strengths="",y.weaknesses="",y.opportunities="",y.threats="",console.log("âœ“ Reset complete"))}catch(u){e(u,"Reset failed")}},Ye=()=>{console.log("Node updated:",B.value)},Ge=(u,x)=>{try{u.preventDefault(),u.stopPropagation(),o.value={visible:!0,x:u.clientX,y:u.clientY,node:x}}catch(O){e(O,"Context menu failed")}},H=()=>{o.value.visible=!1,o.value.node=null},Ve=()=>{try{const u=o.value.node;if(!u)return;B.value&&B.value.id===u.id&&se(),ve(u.id)||e(new Error("Failed to delete node"),"Delete failed"),H()}catch(u){e(u,"Delete node failed")}},Je=u=>{try{const x=p.x+p.w/2,O=p.y+p.h/2,re=p.w/u,ae=p.h/u;p.x=x-re/2,p.y=O-ae/2,p.w=re,p.h=ae}catch(x){e(x,"Zoom failed")}},qe=()=>{try{p.x=0,p.y=0,p.w=1600,p.h=900}catch(u){e(u,"Center view failed")}};return Ke(()=>{try{!(F&&typeof F=="function"&&F())&&I&&typeof I=="function"&&(console.log("No saved state, generating initial map..."),I());const x=O=>{o.value.visible&&!O.target.closest(".context-menu")&&H()};return document.addEventListener("click",x),()=>{document.removeEventListener("click",x)}}catch(u){e(u,"Initialization failed")}}),{chatInput:f,swot:y,isGenerating:D,territories:t,nodes:a,edges:d,selectedNode:B,quickNodeLabel:Ce,editingNode:Me,contextMenu:o,viewBox:p,isPanning:Ne,zoomPercentage:Re,runAnalysis:E,generateMap:I,handleSave:Ue,handleLoad:Be,handleReset:We,handleNodeUpdate:Ye,onNodeRightClick:Ge,closeContextMenu:H,handleDeleteNode:Ve,onWheel:ke,onPanStart:be,onPanMove:Se,onPanEnd:Ie,onNodeDragStart:Pe,onNodeDragMove:Ae,onNodeDragEnd:Le,nodeById:De,selectNode:Oe,deselectNode:se,quickAddNode:Te,zoomToNode:Ee,zoomAtCenter:Je,centerView:qe,error:n,clearError:s}}},No={class:"app"},bo={class:"sidebar"},So=["disabled"],Io={class:"row"},ko=["disabled"],Eo=["disabled"],Co={key:0},Mo={key:1,class:"spinner-row"},Do={class:"row"},Oo={class:"main"},To={class:"toolbar"},Po={class:"badge"},Ao={class:"canvas-wrap"},Lo=["viewBox"],Ro=["x","y","width","height"],Uo=["x","y"],Bo=["x1","y1","x2","y2"],Wo=["onMousedown","onDblclick","onContextmenu"],Yo=["x","y"],Go=["x","y"],Vo={key:0,class:"inspector"};function Jo(n,e,s,o,r,i){var g;return N(),v("div",No,[l("aside",bo,[l("div",null,[e[32]||(e[32]=l("h2",null,"Character Chat â–¸ Needs",-1)),k(l("textarea",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.chatInput=t),disabled:o.isGenerating,placeholder:"e.g. I want to prepare for IELTS in 8 weeks; I struggle with timing and writing Task 1..."},null,8,So),[[C,o.chatInput]]),l("div",Io,[l("button",{class:"btn",onClick:e[1]||(e[1]=(...t)=>o.runAnalysis&&o.runAnalysis(...t)),disabled:o.isGenerating}," Analyze â–¸ SWOT ",8,ko),l("button",{class:"btn",onClick:e[2]||(e[2]=(...t)=>o.generateMap&&o.generateMap(...t)),disabled:o.isGenerating},[o.isGenerating?(N(),v("span",Mo,[...e[31]||(e[31]=[l("span",{class:"spinner"},null,-1),le(" Generating... ",-1)])])):(N(),v("span",Co,"Generate Map"))],8,Eo)])]),l("div",null,[e[33]||(e[33]=l("h2",null,"SWOT (editable)",-1)),e[34]||(e[34]=l("label",{class:"muted"},"Strengths",-1)),k(l("textarea",{"onUpdate:modelValue":e[3]||(e[3]=t=>o.swot.strengths=t)},null,512),[[C,o.swot.strengths]]),e[35]||(e[35]=l("label",{class:"muted"},"Weaknesses",-1)),k(l("textarea",{"onUpdate:modelValue":e[4]||(e[4]=t=>o.swot.weaknesses=t)},null,512),[[C,o.swot.weaknesses]]),e[36]||(e[36]=l("label",{class:"muted"},"Opportunities",-1)),k(l("textarea",{"onUpdate:modelValue":e[5]||(e[5]=t=>o.swot.opportunities=t)},null,512),[[C,o.swot.opportunities]]),e[37]||(e[37]=l("label",{class:"muted"},"Threats",-1)),k(l("textarea",{"onUpdate:modelValue":e[6]||(e[6]=t=>o.swot.threats=t)},null,512),[[C,o.swot.threats]]),l("div",Do,[l("button",{class:"btn",onClick:e[7]||(e[7]=(...t)=>o.handleSave&&o.handleSave(...t))},"Save"),l("button",{class:"btn",onClick:e[8]||(e[8]=(...t)=>o.handleLoad&&o.handleLoad(...t))},"Load"),l("button",{class:"btn",onClick:e[9]||(e[9]=(...t)=>o.handleReset&&o.handleReset(...t))},"Reset")])])]),l("main",Oo,[l("div",To,[l("span",Po,"Zoom: "+T(o.zoomPercentage)+"%",1),l("button",{class:"btn",onClick:e[10]||(e[10]=()=>o.zoomAtCenter(1.2))},"+"),l("button",{class:"btn",onClick:e[11]||(e[11]=()=>o.zoomAtCenter(1/1.2))},"âˆ’"),l("button",{class:"btn",onClick:e[12]||(e[12]=(...t)=>o.centerView&&o.centerView(...t))},"Center"),k(l("input",{type:"text",placeholder:"Quick add node (Label)","onUpdate:modelValue":e[13]||(e[13]=t=>o.quickNodeLabel=t),onKeydown:e[14]||(e[14]=ze((...t)=>o.quickAddNode&&o.quickAddNode(...t),["enter"]))},null,544),[[C,o.quickNodeLabel]]),l("button",{class:"btn",onClick:e[15]||(e[15]=(...t)=>o.quickAddNode&&o.quickAddNode(...t))},"Add Node"),e[38]||(e[38]=l("span",{class:"muted"},"Click+Drag to pan Â· Scroll to zoom Â· Drag nodes",-1))]),l("section",Ao,[(N(),v("svg",{class:ie({dragging:o.isPanning}),viewBox:`${o.viewBox.x} ${o.viewBox.y} ${o.viewBox.w} ${o.viewBox.h}`,onMousedown:e[16]||(e[16]=(...t)=>o.onPanStart&&o.onPanStart(...t)),onMousemove:e[17]||(e[17]=(...t)=>o.onPanMove&&o.onPanMove(...t)),onMouseup:e[18]||(e[18]=(...t)=>o.onPanEnd&&o.onPanEnd(...t)),onMouseleave:e[19]||(e[19]=(...t)=>o.onPanEnd&&o.onPanEnd(...t)),onWheel:e[20]||(e[20]=W((...t)=>o.onWheel&&o.onWheel(...t),["prevent"]))},[e[39]||(e[39]=l("defs",null,[l("marker",{id:"arrow",viewBox:"0 0 10 10",refX:"10",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse"},[l("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#b9bfd2"})])],-1)),(N(!0),v(j,null,K(o.territories,t=>(N(),v("g",{key:t.id},[l("rect",{class:"territory",x:t.x,y:t.y,rx:12,ry:12,width:t.w,height:t.h},null,8,Ro),l("text",{class:"territory-title",x:t.x+10,y:t.y+18},T(t.label),9,Uo)]))),128)),l("g",null,[(N(!0),v(j,null,K(o.edges,t=>{var a,d,f,y;return N(),v("line",{key:t.id,class:"edge",x1:((a=o.nodeById(t.source))==null?void 0:a.x)||0,y1:((d=o.nodeById(t.source))==null?void 0:d.y)||0,x2:((f=o.nodeById(t.target))==null?void 0:f.x)||0,y2:((y=o.nodeById(t.target))==null?void 0:y.y)||0},null,8,Bo)}),128))]),(N(!0),v(j,null,K(o.nodes,t=>(N(),v("g",{key:t.id,onMousedown:W(a=>o.onNodeDragStart(a,t),["stop"]),onDblclick:W(()=>o.selectNode(t),["stop"]),onContextmenu:W(a=>o.onNodeRightClick(a,t),["prevent"])},[l("rect",{class:ie(["node",o.selectedNode&&o.selectedNode.id===t.id?"selected":""]),x:t.x-60,y:t.y-22,rx:"10",ry:"10",width:"120",height:"44"},null,10,Yo),l("text",{class:"node-label",x:t.x,y:t.y+4,"text-anchor":"middle"},T(t.label),9,Go)],40,Wo))),128))],42,Lo)),o.selectedNode?(N(),v("div",Vo,[l("h3",null,T(o.selectedNode.label),1),k(l("input",{"onUpdate:modelValue":e[21]||(e[21]=t=>o.selectedNode.label=t),placeholder:"Node Label",onInput:e[22]||(e[22]=(...t)=>o.handleNodeUpdate&&o.handleNodeUpdate(...t))},null,544),[[C,o.selectedNode.label]]),k(l("textarea",{"onUpdate:modelValue":e[23]||(e[23]=t=>o.selectedNode.note=t),placeholder:"Notes...",onInput:e[24]||(e[24]=(...t)=>o.handleNodeUpdate&&o.handleNodeUpdate(...t))},null,544),[[C,o.selectedNode.note]]),k(l("select",{"onUpdate:modelValue":e[25]||(e[25]=t=>o.selectedNode.status=t),onChange:e[26]||(e[26]=(...t)=>o.handleNodeUpdate&&o.handleNodeUpdate(...t))},[...e[40]||(e[40]=[l("option",{value:"todo"},"To Do",-1),l("option",{value:"in-progress"},"In Progress",-1),l("option",{value:"done"},"Done",-1)])],544),[[Fe,o.selectedNode.status]]),l("button",{class:"btn",onClick:e[27]||(e[27]=(...t)=>o.deselectNode&&o.deselectNode(...t))},"Close")])):X("",!0)])]),o.contextMenu.visible?(N(),v("div",{key:0,class:"context-menu",style:He({left:o.contextMenu.x+"px",top:o.contextMenu.y+"px"})},[l("button",{class:"context-menu-item danger",onClick:e[28]||(e[28]=(...t)=>o.handleDeleteNode&&o.handleDeleteNode(...t))},[e[41]||(e[41]=l("span",{class:"icon"},"ðŸ—‘ï¸",-1)),le(' Delete "'+T((g=o.contextMenu.node)==null?void 0:g.label)+'" ',1)]),l("button",{class:"context-menu-item",onClick:e[29]||(e[29]=(...t)=>o.closeContextMenu&&o.closeContextMenu(...t))}," Cancel ")],4)):X("",!0),o.error?(N(),v("div",{key:1,class:"error-banner",onClick:e[30]||(e[30]=(...t)=>o.clearError&&o.clearError(...t))},T(o.error)+" (click to dismiss) ",1)):X("",!0)])}const qo=xo(vo,[["render",Jo],["__scopeId","data-v-ad7e19d7"]]),zo=(n,e,s)=>{console.error("Global Error:",n),console.error("Component:",e),console.error("Error Info:",s)},ne=Ze(qo);ne.config.errorHandler=zo;ne.config.performance=!0;try{ne.mount("#app"),console.log("âœ“ Character Canvas initialized successfully")}catch(n){console.error("Failed to mount Vue app:",n),document.querySelector("#app").innerHTML=`
    <div style="padding: 20px; font-family: system-ui;">
      <h1 style="color: #c33;">Application Failed to Load</h1>
      <p>An error occurred while initializing the application.</p>
      <pre style="background: #f5f5f5; padding: 10px; border-radius: 4px; overflow: auto;">
${n.stack||n.message}
      </pre>
      <button onclick="location.reload()" style="padding: 10px 20px; border-radius: 6px; border: none; background: #111; color: #fff; cursor: pointer;">
        Reload Page
      </button>
    </div>
  `}
//# sourceMappingURL=index-D0IxqsBM.js.map
