{"version":3,"file":"index-CkdIZbFB.js","sources":["../../src/composables/useState.js","../../src/composables/useCanvas.js","../../src/composables/useNodes.js","../../src/App.vue","../../src/main.js"],"sourcesContent":["\nimport { reactive, ref } from 'vue';\nimport placeNodes from '../services/nodePositioning.js';\n\n/**\n * @typedef {Object} Territory\n * @property {string} id - Unique identifier\n * @property {string} label - Display name\n * @property {number} x - X coordinate\n * @property {number} y - Y coordinate\n * @property {number} w - Width\n * @property {number} h - Height\n */\n\n/**\n * @typedef {Object} Node\n * @property {string} id - Unique identifier\n * @property {string} label - Display name\n * @property {number} x - X coordinate\n * @property {number} y - Y coordinate\n * @property {string|null} territoryId - Parent territory ID\n * @property {string} note - User notes\n * @property {'todo'|'in-progress'|'done'} status - Task status\n * @property {number} timestamp - Creation time\n */\n\n/**\n * @typedef {Object} Edge\n * @property {string} id - Unique identifier\n * @property {string} source - Source node ID\n * @property {string} target - Target node ID\n */\n\n/**\n * @typedef {Object} SWOT\n * @property {string} strengths\n * @property {string} weaknesses\n * @property {string} opportunities\n * @property {string} threats\n */\n\n// --- CORE DATA STATE (EXPORTED FOR GLOBAL ACCESS) ---\n/** @type {import('vue').UnwrapRef<Territory[]>} */\nexport const territories = reactive([]);\n\n/** @type {import('vue').UnwrapRef<Node[]>} */\nexport const nodes = reactive([]);\n\n/** @type {import('vue').UnwrapRef<Edge[]>} */\nexport const edges = reactive([]);\n\n// --- FEATURE/UI STATE ---\nexport const chatInput = ref('');\n\n/** @type {import('vue').UnwrapRef<SWOT>} */\nexport const swot = reactive({ strengths:'', weaknesses:'', opportunities:'', threats:'' });\n\n// ---------- SNAPSHOT (localStorage simple) ----------\n/**\n * Save current state to localStorage history\n * @param {string} [name] - Optional snapshot name\n * @throws {Error} If localStorage is unavailable\n */\nexport function saveSnapshot(name) {\n    try {\n        const raw = localStorage.getItem('mvp-history');\n        const history = raw ? JSON.parse(raw) : [];\n\n        // Ensure deep copy for saving the current state\n        const data = {\n            territories: JSON.parse(JSON.stringify(territories)),\n            nodes: JSON.parse(JSON.stringify(nodes)),\n            edges: JSON.parse(JSON.stringify(edges)),\n            swot: {...swot},\n            ts: Date.now(),\n            name\n        };\n\n        history.push({\n            id: crypto.randomUUID(),\n            ts: Date.now(),\n            name: name || `snap-${history.length+1}`,\n            data\n        });\n\n        localStorage.setItem('mvp-history', JSON.stringify(history));\n    } catch (error) {\n        console.error('Failed to save snapshot:', error);\n        throw new Error(`Snapshot save failed: ${error.message}`);\n    }\n}\n\n/**\n * Load snapshot from history by index\n * @param {number} index - Snapshot index in history array\n * @throws {Error} If snapshot not found or invalid\n */\nexport function loadSnapshot(index) {\n    try {\n        const raw = localStorage.getItem('mvp-history');\n        if (!raw) {\n            throw new Error('No saved history found');\n        }\n\n        const history = JSON.parse(raw);\n        const snap = history[index];\n\n        if (!snap || !snap.data) {\n            throw new Error(`Invalid snapshot at index ${index}`);\n        }\n\n        // Clear current state and push new data (maintaining reactivity)\n        territories.splice(0);\n        nodes.splice(0);\n        edges.splice(0);\n\n        (snap.data.territories || []).forEach(t => territories.push(t));\n        (snap.data.nodes || []).forEach(n => nodes.push(n));\n        (snap.data.edges || []).forEach(e => edges.push(e));\n\n        // Restore SWOT if available\n        if (snap.data.swot) {\n            Object.assign(swot, snap.data.swot);\n        }\n    } catch (error) {\n        console.error('Failed to load snapshot:', error);\n        throw new Error(`Snapshot load failed: ${error.message}`);\n    }\n}\n\n// ---------- TERRITORY POSITIONING CONSTANTS ----------\nconst TERRITORY_PADDING = 20;      // px from edges\nconst TERRITORY_HEADER = 60;       // Space for territory title\nconst NODE_WIDTH = 180;\nconst NODE_HEIGHT = 80;\nconst NODE_SPACING_X = 20;         // Horizontal spacing between nodes\nconst NODE_SPACING_Y = 20;         // Vertical spacing between nodes\nconst COLS_PER_TERRITORY = 2;      // Number of columns in territory grid\nconst TERRITORY_SPACING = 50;      // Space between territories\nconst TERRITORY_COLS = 3;          // Number of territory columns in layout\n\n/**\n * Calculate optimal territory dimensions based on number of nodes\n * @param {number} nodeCount - Number of nodes in territory\n * @returns {{ width: number, height: number }}\n */\nfunction calculateTerritoryDimensions(nodeCount) {\n    const rows = Math.ceil(nodeCount / COLS_PER_TERRITORY);\n\n    const width =\n        TERRITORY_PADDING * 2 +\n        (COLS_PER_TERRITORY * NODE_WIDTH) +\n        ((COLS_PER_TERRITORY - 1) * NODE_SPACING_X);\n\n    const height =\n        TERRITORY_HEADER +\n        TERRITORY_PADDING * 2 +\n        (rows * NODE_HEIGHT) +\n        ((rows - 1) * NODE_SPACING_Y);\n\n    // Minimum dimensions\n    return {\n        width: Math.max(width, 400),\n        height: Math.max(height, 350)\n    };\n}\n\n/**\n * Position a node inside its territory with bounds checking\n * @param {Node} node - Node to position\n * @param {Territory} territory - Parent territory\n * @param {number} indexInTerritory - Index of node within territory\n * @returns {{ x: number, y: number }}\n */\nfunction positionNodeInTerritory(node, territory, indexInTerritory) {\n    const col = indexInTerritory % COLS_PER_TERRITORY;\n    const row = Math.floor(indexInTerritory / COLS_PER_TERRITORY);\n\n    // Calculate initial position\n    const x = territory.x + TERRITORY_PADDING + (col * (NODE_WIDTH + NODE_SPACING_X));\n    const y = territory.y + TERRITORY_HEADER + TERRITORY_PADDING + (row * (NODE_HEIGHT + NODE_SPACING_Y));\n\n    // CRITICAL: Ensure node doesn't exceed territory bounds\n    const maxX = territory.x + territory.w - NODE_WIDTH - TERRITORY_PADDING;\n    const maxY = territory.y + territory.h - NODE_HEIGHT - TERRITORY_PADDING;\n\n    const finalX = Math.min(x, maxX);\n    const finalY = Math.min(y, maxY);\n\n    // Visual debugging - check if clamping occurred\n    if (x !== finalX || y !== finalY) {\n        console.warn(`⚠️ Node \"${node.label}\" clamped in territory \"${territory.label}\":`, {\n            original: { x, y },\n            clamped: { x: finalX, y: finalY },\n            territory: {\n                bounds: {\n                    x: territory.x,\n                    y: territory.y,\n                    w: territory.w,\n                    h: territory.h\n                },\n                maxAllowed: { x: maxX, y: maxY }\n            }\n        });\n    }\n\n    return { x: finalX, y: finalY };\n}\n\n// ---------- STUBS for analysis & map generation ----------\nexport function runAnalysis() {\n    // rule-based stub: fill swot from chatInput for demo\n    if (chatInput.value.toLowerCase().includes('ielts')) {\n      swot.strengths = 'Good listening';\n      swot.weaknesses = 'Timing in writing';\n    } else {\n      swot.strengths = 'Creative';\n    }\n    alert('SWOT drafted (stub).');\n}\n\nexport async function generateMap() {\n    try {\n        // Clear existing data\n        territories.splice(0); nodes.splice(0); edges.splice(0);\n\n        // Call backend API to generate map using LLM (same server, relative path)\n        const response = await fetch('/api/generate', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                prompt: chatInput.value || 'Create a learning plan for IELTS preparation with listening, reading, writing, and speaking skills'\n            })\n        });\n\n        if (!response.ok) {\n            throw new Error(`API error: ${response.status}`);\n        }\n\n        const data = await response.json();\n        const mapData = data.data; // Backend returns { success: true, data: mapJson }\n\n        // LLM returns nodes WITH x,y coordinates - override them with our positioning algorithm\n        const llmNodes = mapData.nodes.map(n => ({\n            id: n.id || crypto.randomUUID(),\n            label: n.label,\n            type: n.type || 'concept',\n            note: '',\n            status: 'todo',\n            timestamp: Date.now()\n        }));\n\n        const llmEdges = mapData.edges.map(e => ({\n            id: e.id || crypto.randomUUID(),\n            source: e.source,\n            target: e.target,\n            type: e.type || 'relationship'\n        }));\n\n        // Add to state\n        llmNodes.forEach(n => nodes.push(n));\n        llmEdges.forEach(e => edges.push(e));\n\n        // Handle territories from LLM FIRST (before positioning nodes)\n        if (mapData.territories && mapData.territories.length > 0) {\n            console.log('🗺️ Creating territories with dynamic sizing...');\n\n            mapData.territories.forEach((t, index) => {\n                const nodeCount = (t.nodeIds || []).length;\n\n                // Calculate dimensions based on node count\n                const dimensions = calculateTerritoryDimensions(nodeCount);\n\n                // Position territories in a grid layout\n                const col = index % TERRITORY_COLS;\n                const row = Math.floor(index / TERRITORY_COLS);\n\n                const territory = {\n                    id: t.id || crypto.randomUUID(),\n                    label: t.name,\n                    x: 100 + col * (dimensions.width + TERRITORY_SPACING),\n                    y: 100 + row * (dimensions.height + TERRITORY_SPACING),\n                    w: dimensions.width,\n                    h: dimensions.height,\n                    nodeIds: t.nodeIds || []\n                };\n\n                territories.push(territory);\n\n                // Debug log\n                console.log(`  📦 Territory \"${territory.label}\":`, {\n                    nodes: nodeCount,\n                    dimensions: { w: dimensions.width, h: dimensions.height },\n                    position: { x: territory.x, y: territory.y }\n                });\n            });\n        }\n\n        // Position nodes INSIDE their territories\n        console.log('\\n📍 Positioning nodes within territories...');\n        let nodesPositioned = 0;\n        let nodesOutside = 0;\n\n        nodes.forEach(node => {\n            // Find which territory this node belongs to\n            const territory = territories.find(t =>\n                t.nodeIds && t.nodeIds.includes(node.id)\n            );\n\n            if (territory) {\n                // Find index within territory\n                const indexInTerritory = territory.nodeIds.indexOf(node.id);\n\n                // Use helper function with bounds checking\n                const position = positionNodeInTerritory(node, territory, indexInTerritory);\n                node.x = position.x;\n                node.y = position.y;\n\n                nodesPositioned++;\n\n                // Debug: verify node is within bounds\n                const isWithinBounds =\n                    node.x >= territory.x &&\n                    node.x + NODE_WIDTH <= territory.x + territory.w &&\n                    node.y >= territory.y &&\n                    node.y + NODE_HEIGHT <= territory.y + territory.h;\n\n                if (!isWithinBounds) {\n                    console.error(`❌ Node \"${node.label}\" STILL outside territory \"${territory.label}\"!`, {\n                        node: { x: node.x, y: node.y },\n                        territory: { x: territory.x, y: territory.y, w: territory.w, h: territory.h }\n                    });\n                }\n            } else {\n                // Fallback: random position if no territory\n                node.x = Math.random() * 800 + 100;\n                node.y = Math.random() * 600 + 100;\n                nodesOutside++;\n                console.warn(`⚠️ Node \"${node.label}\" has no territory assignment`);\n            }\n        });\n\n        console.log(`✓ Positioned ${nodesPositioned} nodes, ${nodesOutside} outside territories`);\n\n        saveSnapshot('auto-generate');\n        console.log('✓ Map generated from LLM with algorithmic positioning');\n    } catch (error) {\n        console.error('Map generation failed:', error);\n        alert(`Failed to generate map: ${error.message}`);\n    }\n}\n\nexport function useState() {\n    return {\n        // Data arrays\n        territories, nodes, edges,\n        // Feature state\n        chatInput, swot,\n        // Functions\n        saveSnapshot, loadSnapshot, runAnalysis, generateMap\n    }\n}","// src/composables/useCanvas.js\nimport { reactive, ref, onMounted, onUnmounted } from 'vue';\n\n/**\n * @typedef {Object} ViewBox\n * @property {number} x - X offset\n * @property {number} y - Y offset\n * @property {number} w - Width\n * @property {number} h - Height\n */\n\n/**\n * @typedef {Object} Point\n * @property {number} x - X coordinate\n * @property {number} y - Y coordinate\n */\n\nconst initView = reactive({ x: 0, y: 0, w: 1600, h: 900 });\n\n/** @type {import('vue').UnwrapRef<ViewBox>} */\nexport const viewBox = reactive({ x: initView.x, y: initView.y, w: initView.w, h: initView.h });\n\nconst isPanning = ref(false);\nconst lastPan = reactive({ x: 0, y: 0 });\n\n// ---------- UTIL: coord conversion (EXPORTED) ----------\n/**\n * Convert screen mouse event to world coordinates\n * @param {MouseEvent} e - Mouse event\n * @returns {Point} World coordinates\n */\nexport function svgToWorld(e) {\n  const svg = document.querySelector('svg');\n  if (!svg) {\n    console.warn('SVG element not found');\n    return { x: 0, y: 0 };\n  }\n\n  const r = svg.getBoundingClientRect();\n  const px = (e.clientX - r.left) / r.width;\n  const py = (e.clientY - r.top) / r.height;\n\n  return {\n    x: viewBox.x + px * viewBox.w,\n    y: viewBox.y + py * viewBox.h\n  };\n}\n\n/**\n * Convert world node coordinates to screen position\n * @param {Object} node - Node with x, y properties\n * @param {number} node.x - World X coordinate\n * @param {number} node.y - World Y coordinate\n * @returns {Point & {rect: DOMRect}} Screen coordinates with SVG rect\n */\nexport function worldToScreen(node) {\n  const svg = document.querySelector('svg');\n  if (!svg) {\n    console.warn('SVG element not found');\n    return { x: 0, y: 0, rect: null };\n  }\n\n  const r = svg.getBoundingClientRect();\n  const sx = ((node.x - viewBox.x) / viewBox.w) * r.width + r.left;\n  const sy = ((node.y - viewBox.y) / viewBox.h) * r.height + r.top;\n\n  return { x: sx, y: sy, rect: r };\n}\n\n// ---------- PAN (canvas dragging) ----------\nexport function onPanStart(e) {\n  isPanning.value = true;\n  lastPan.x = e.clientX;\n  lastPan.y = e.clientY;\n}\nexport function onPanMove(e) {\n  if (!isPanning.value) return;\n  const svg = e.currentTarget; \n  const dx = (e.clientX - lastPan.x) * (viewBox.w / svg.clientWidth);\n  const dy = (e.clientY - lastPan.y) * (viewBox.h / svg.clientHeight);\n  viewBox.x -= dx;\n  viewBox.y -= dy;\n  lastPan.x = e.clientX;\n  lastPan.y = e.clientY;\n}\nexport function onPanEnd() { isPanning.value = false; }\n\n// ---------- WHEEL (zoom at cursor) ----------\nexport const onWheel = (event) => {\n  const svg = event.currentTarget;\n  const rect = svg.getBoundingClientRect();\n  const mouseX = event.clientX - rect.left;\n  const mouseY = event.clientY - rect.top;\n  const scaleFactor = event.deltaY < 0 ? 0.9 : 1.1; // zoom in when scroll up\n  const worldMx = viewBox.x + (mouseX / rect.width) * viewBox.w;\n  const worldMy = viewBox.y + (mouseY / rect.height) * viewBox.h;\n\n  // new size\n  const newW = viewBox.w * scaleFactor;\n  const newH = viewBox.h * scaleFactor;\n  // keep the zoom centered on mouse\n  viewBox.x = worldMx - (mouseX / rect.width) * newW;\n  viewBox.y = worldMy - (mouseY / rect.height) * newH;\n  viewBox.w = newW;\n  viewBox.h = newH;\n};\n\n// ---------- ZOOM TO NODE (smooth-ish) ----------\nexport function zoomToNode(node, scale = 2, duration = 300) {\n  const start = { x: viewBox.x, y: viewBox.y, w: viewBox.w, h: viewBox.h };\n  const cx = node.x, cy = node.y;\n  const targetW = initView.w / scale;\n  const targetH = initView.h / scale;\n  const target = { x: cx - targetW / 2, y: cy - targetH / 2, w: targetW, h: targetH };\n  const t0 = performance.now();\n  function step(t) {\n    const p = Math.min(1, (t - t0) / duration);\n    const e = 1 - Math.pow(1 - p, 2); // easeOutQuad\n    viewBox.x = start.x + (target.x - start.x) * e;\n    viewBox.y = start.y + (target.y - start.y) * e;\n    viewBox.w = start.w + (target.w - start.w) * e;\n    viewBox.h = start.h + (target.h - start.h) * e;\n    if (p < 1) requestAnimationFrame(step);\n  }\n  requestAnimationFrame(step);\n}\n\n\nexport function useCanvas() {\n    return {\n        viewBox, isPanning,\n        onPanStart, onPanMove, onPanEnd, onWheel,\n        svgToWorld, worldToScreen, zoomToNode,\n    }\n}","// src/composables/useNodes.js\nimport { reactive, ref } from 'vue';\nimport { nodes } from './useState.js';\nimport { svgToWorld, viewBox } from './useCanvas.js';\n\n/**\n * @typedef {Object} DragState\n * @property {boolean} active - Is dragging active\n * @property {string|null} id - Node being dragged\n * @property {number} ox - Offset X\n * @property {number} oy - Offset Y\n */\n\n// --- NODE/SELECTION STATE ---\nconst selectedNode = ref(null);\nconst quickNodeLabel = ref('');\nconst editingNode = ref(null);\n\n/** @type {import('vue').UnwrapRef<DragState>} */\nconst dragging = reactive({ active: false, id: null, ox: 0, oy: 0 });\n\n// ---------- NODE / EDGE CRUD helpers ----------\n/**\n * Find node by ID\n * @param {string} id - Node ID\n * @returns {import('./useState').Node|undefined}\n */\nexport function nodeById(id) {\n  return nodes.find(n => n.id === id);\n}\n\n/**\n * Select a node for editing\n * @param {import('./useState').Node} n - Node to select\n */\nexport function selectNode(n) {\n  selectedNode.value = n;\n  editingNode.value = n;\n}\n\n/**\n * Deselect current node\n */\nexport function deselectNode() {\n  selectedNode.value = null;\n  editingNode.value = null;\n}\n\n/**\n * Quick add a new node at viewport center\n */\nexport function quickAddNode() {\n  const label = quickNodeLabel.value.trim();\n  if (!label) {\n    console.warn('Cannot add node with empty label');\n    return;\n  }\n\n  const id = crypto.randomUUID();\n  const newNode = {\n    id,\n    label,\n    x: viewBox.x + viewBox.w / 2,\n    y: viewBox.y + viewBox.h / 2,\n    territoryId: null,\n    note: '',\n    status: 'todo',\n    timestamp: Date.now()\n  };\n\n  nodes.push(newNode);\n  quickNodeLabel.value = '';\n}\n\n// ---------- NODE DRAGGING (Uses svgToWorld from useCanvas) ----------\nexport const onNodeDragStart = (e, node) => {\n  e.stopPropagation(); \n  const p = svgToWorld(e); // <-- CRITICAL: Uses imported helper\n  dragging.active = true;\n  dragging.id = node.id;\n  dragging.ox = p.x - node.x;\n  dragging.oy = p.y - node.y;\n  window.addEventListener('mousemove', onNodeDragMove);\n  window.addEventListener('mouseup', onNodeDragEnd);\n};\n\nexport const onNodeDragMove = (e) => {\n  if (!dragging.active || !dragging.id) return;\n  const p = svgToWorld(e); // <-- CRITICAL: Uses imported helper\n  const n = nodes.find(x => x.id === dragging.id); // <-- CRITICAL: Uses imported 'nodes'\n  if (!n) return;\n  n.x = p.x - dragging.ox;\n  n.y = p.y - dragging.oy;\n};\n\nexport const onNodeDragEnd = (e) => {\n  dragging.active = false;\n  dragging.id = null;\n  window.removeEventListener('mousemove', onNodeDragMove);\n  window.removeEventListener('mouseup', onNodeDragEnd);\n};\n\nexport function useNodes() {\n    return {\n        selectedNode, quickNodeLabel, editingNode, dragging,\n        nodeById, selectNode, deselectNode, quickAddNode,\n        onNodeDragStart, onNodeDragMove, onNodeDragEnd,\n    }\n}\n\n","<template>\n  <div class=\"app\">\n    <!-- Sidebar: chat & analysis -->\n    <aside class=\"sidebar\">\n      <div>\n        <h2>Character Chat ▸ Needs</h2>\n        <textarea\n          v-model=\"chatInput\"\n          placeholder=\"e.g. I want to prepare for IELTS in 8 weeks; I struggle with timing and writing Task 1...\"\n        ></textarea>\n        <div class=\"row\">\n          <button class=\"btn\" @click=\"runAnalysis\">Analyze ▸ SWOT</button>\n          <button class=\"btn\" @click=\"generateMap\">Generate Map</button>\n        </div>\n      </div>\n\n      <div>\n        <h2>SWOT (editable)</h2>\n        <label class=\"muted\">Strengths</label>\n        <textarea v-model=\"swot.strengths\"></textarea>\n        <label class=\"muted\">Weaknesses</label>\n        <textarea v-model=\"swot.weaknesses\"></textarea>\n        <label class=\"muted\">Opportunities</label>\n        <textarea v-model=\"swot.opportunities\"></textarea>\n        <label class=\"muted\">Threats</label>\n        <textarea v-model=\"swot.threats\"></textarea>\n        <div class=\"row\">\n          <button class=\"btn\" @click=\"handleSave\">Save</button>\n          <button class=\"btn\" @click=\"handleLoad\">Load</button>\n          <button class=\"btn\" @click=\"handleReset\">Reset</button>\n        </div>\n      </div>\n    </aside>\n\n    <!-- Main: toolbar + canvas -->\n    <main class=\"main\">\n      <div class=\"toolbar\">\n        <span class=\"badge\">Zoom: {{ zoomPercentage }}%</span>\n        <button class=\"btn\" @click=\"() => zoomAtCenter(1.2)\">+</button>\n        <button class=\"btn\" @click=\"() => zoomAtCenter(1 / 1.2)\">−</button>\n        <button class=\"btn\" @click=\"centerView\">Center</button>\n        <input\n          type=\"text\"\n          placeholder=\"Quick add node (Label)\"\n          v-model=\"quickNodeLabel\"\n          @keydown.enter=\"quickAddNode\"\n        />\n        <button class=\"btn\" @click=\"quickAddNode\">Add Node</button>\n        <span class=\"muted\">Click+Drag to pan · Scroll to zoom · Drag nodes</span>\n      </div>\n\n      <section class=\"canvas-wrap\">\n        <svg\n          :class=\"{ dragging: isPanning }\"\n          :viewBox=\"`${viewBox.x} ${viewBox.y} ${viewBox.w} ${viewBox.h}`\"\n          @mousedown=\"onPanStart\"\n          @mousemove=\"onPanMove\"\n          @mouseup=\"onPanEnd\"\n          @mouseleave=\"onPanEnd\"\n          @wheel.prevent=\"onWheel\"\n        >\n          <!-- defs -->\n          <defs>\n            <marker\n              id=\"arrow\"\n              viewBox=\"0 0 10 10\"\n              refX=\"10\"\n              refY=\"5\"\n              markerWidth=\"6\"\n              markerHeight=\"6\"\n              orient=\"auto-start-reverse\"\n            >\n              <path d=\"M 0 0 L 10 5 L 0 10 z\" fill=\"#b9bfd2\"></path>\n            </marker>\n          </defs>\n\n          <!-- territories -->\n          <g v-for=\"t in territories\" :key=\"t.id\">\n            <rect\n              class=\"territory\"\n              :x=\"t.x\"\n              :y=\"t.y\"\n              :rx=\"12\"\n              :ry=\"12\"\n              :width=\"t.w\"\n              :height=\"t.h\"\n            ></rect>\n            <text class=\"territory-title\" :x=\"t.x + 10\" :y=\"t.y + 18\">\n              {{ t.label }}\n            </text>\n          </g>\n\n          <!-- edges -->\n          <g>\n            <line\n              v-for=\"e in edges\"\n              :key=\"e.id\"\n              class=\"edge\"\n              :x1=\"nodeById(e.source)?.x || 0\"\n              :y1=\"nodeById(e.source)?.y || 0\"\n              :x2=\"nodeById(e.target)?.x || 0\"\n              :y2=\"nodeById(e.target)?.y || 0\"\n            />\n          </g>\n\n          <!-- nodes -->\n          <g\n            v-for=\"n in nodes\"\n            :key=\"n.id\"\n            @mousedown.stop=\"(e) => onNodeDragStart(e, n)\"\n            @dblclick.stop=\"() => selectNode(n)\"\n          >\n            <rect\n              :class=\"['node', selectedNode && selectedNode.id === n.id ? 'selected' : '']\"\n              :x=\"n.x - 60\"\n              :y=\"n.y - 22\"\n              rx=\"10\"\n              ry=\"10\"\n              width=\"120\"\n              height=\"44\"\n            />\n            <text\n              class=\"node-label\"\n              :x=\"n.x\"\n              :y=\"n.y + 4\"\n              text-anchor=\"middle\"\n            >\n              {{ n.label }}\n            </text>\n          </g>\n        </svg>\n\n        <!-- Inspector Panel (when node selected) -->\n        <div v-if=\"selectedNode\" class=\"inspector\">\n          <h3>{{ selectedNode.label }}</h3>\n          <input\n            v-model=\"selectedNode.label\"\n            placeholder=\"Node Label\"\n            @input=\"handleNodeUpdate\"\n          />\n          <textarea\n            v-model=\"selectedNode.note\"\n            placeholder=\"Notes...\"\n            @input=\"handleNodeUpdate\"\n          ></textarea>\n          <select v-model=\"selectedNode.status\" @change=\"handleNodeUpdate\">\n            <option value=\"todo\">To Do</option>\n            <option value=\"in-progress\">In Progress</option>\n            <option value=\"done\">Done</option>\n          </select>\n          <button class=\"btn\" @click=\"deselectNode\">Close</button>\n        </div>\n      </section>\n    </main>\n\n    <!-- Error Display -->\n    <div v-if=\"error\" class=\"error-banner\" @click=\"clearError\">\n      {{ error }} (click to dismiss)\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, computed, onMounted, onErrorCaptured } from 'vue';\nimport { useState } from './composables/useState.js';\nimport { useCanvas } from './composables/useCanvas.js';\nimport { useNodes } from './composables/useNodes.js';\n\nexport default {\n  name: 'App',\n  setup() {\n    // Error handling\n    const error = ref(null);\n\n    const handleError = (err, context = '') => {\n      console.error(`[App Error] ${context}:`, err);\n      error.value = `${context}: ${err.message || err}`;\n      setTimeout(() => { error.value = null; }, 5000);\n    };\n\n    const clearError = () => { error.value = null; };\n\n    // Capture component errors\n    onErrorCaptured((err, instance, info) => {\n      handleError(err, `Component error (${info})`);\n      return false; // Prevent error propagation\n    });\n\n    // Execute composables with error handling\n    let stateComposable, canvasComposable, nodesComposable;\n\n    try {\n      stateComposable = useState();\n      canvasComposable = useCanvas();\n      nodesComposable = useNodes();\n    } catch (err) {\n      handleError(err, 'Composable initialization failed');\n      // Provide fallbacks\n      stateComposable = { territories: ref([]), nodes: ref([]), edges: ref([]), chatInput: ref(''), swot: ref({}) };\n      canvasComposable = { viewBox: ref({ x: 0, y: 0, w: 1600, h: 900 }), isPanning: ref(false) };\n      nodesComposable = { selectedNode: ref(null), quickNodeLabel: ref('') };\n    }\n\n    // Destructure composables\n    const {\n      territories, nodes, edges, chatInput, swot,\n      runAnalysis, generateMap, saveSnapshot, loadSnapshot\n    } = stateComposable;\n\n    const {\n      viewBox, isPanning,\n      onPanStart, onPanMove, onPanEnd, onWheel,\n      svgToWorld, worldToScreen, zoomToNode\n    } = canvasComposable;\n\n    const {\n      selectedNode, quickNodeLabel, editingNode, dragging,\n      nodeById, selectNode, deselectNode, quickAddNode,\n      onNodeDragStart, onNodeDragMove, onNodeDragEnd\n    } = nodesComposable;\n\n    // Computed zoom percentage\n    const zoomPercentage = computed(() => {\n      const initW = 1600; // Default initial width\n      return (100 * (initW / viewBox.w)).toFixed(0);\n    });\n\n    // Enhanced action handlers with error handling\n    const handleSave = () => {\n      try {\n        saveSnapshot(`manual-${Date.now()}`);\n        console.log('✓ State saved successfully');\n      } catch (err) {\n        handleError(err, 'Save failed');\n      }\n    };\n\n    const handleLoad = () => {\n      try {\n        const index = 0; // Load latest snapshot\n        loadSnapshot(index);\n        console.log('✓ State loaded successfully');\n      } catch (err) {\n        handleError(err, 'Load failed');\n      }\n    };\n\n    const handleReset = () => {\n      try {\n        if (confirm('Reset all data? This cannot be undone.')) {\n          territories.splice(0);\n          nodes.splice(0);\n          edges.splice(0);\n          chatInput.value = '';\n          swot.strengths = '';\n          swot.weaknesses = '';\n          swot.opportunities = '';\n          swot.threats = '';\n          console.log('✓ Reset complete');\n        }\n      } catch (err) {\n        handleError(err, 'Reset failed');\n      }\n    };\n\n    const handleNodeUpdate = () => {\n      // Trigger reactivity and optionally auto-save\n      console.log('Node updated:', selectedNode.value);\n    };\n\n    // Zoom controls\n    const zoomAtCenter = (factor) => {\n      try {\n        const cx = viewBox.x + viewBox.w / 2;\n        const cy = viewBox.y + viewBox.h / 2;\n        const newW = viewBox.w / factor;\n        const newH = viewBox.h / factor;\n        viewBox.x = cx - newW / 2;\n        viewBox.y = cy - newH / 2;\n        viewBox.w = newW;\n        viewBox.h = newH;\n      } catch (err) {\n        handleError(err, 'Zoom failed');\n      }\n    };\n\n    const centerView = () => {\n      try {\n        viewBox.x = 0;\n        viewBox.y = 0;\n        viewBox.w = 1600;\n        viewBox.h = 900;\n      } catch (err) {\n        handleError(err, 'Center view failed');\n      }\n    };\n\n    // Mount lifecycle\n    onMounted(() => {\n      try {\n        // Generate initial demo map\n        if (generateMap && typeof generateMap === 'function') {\n          generateMap();\n          console.log('✓ Initial map generated');\n        }\n      } catch (err) {\n        handleError(err, 'Initial map generation failed');\n      }\n    });\n\n    // Return everything to template\n    return {\n      // State\n      chatInput,\n      swot,\n      territories,\n      nodes,\n      edges,\n      selectedNode,\n      quickNodeLabel,\n      editingNode,\n\n      // View\n      viewBox,\n      isPanning,\n      zoomPercentage,\n\n      // Actions\n      runAnalysis,\n      generateMap,\n      handleSave,\n      handleLoad,\n      handleReset,\n      handleNodeUpdate,\n      onWheel,\n      onPanStart,\n      onPanMove,\n      onPanEnd,\n      onNodeDragStart,\n      onNodeDragMove,\n      onNodeDragEnd,\n      nodeById,\n      selectNode,\n      deselectNode,\n      quickAddNode,\n      zoomToNode,\n      zoomAtCenter,\n      centerView,\n\n      // Error handling\n      error,\n      clearError\n    };\n  }\n};\n</script>\n\n<style scoped>\n.app {\n  display: grid;\n  grid-template-columns: 320px 1fr;\n  height: 100vh;\n}\n\n.sidebar {\n  border-right: 1px solid #eee;\n  padding: 14px;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  overflow-y: auto;\n}\n\n.sidebar h2 {\n  margin: 0 0 6px;\n  font-size: 18px;\n}\n\n.sidebar textarea {\n  width: 100%;\n  min-height: 120px;\n  padding: 10px;\n  border: 1px solid #ddd;\n  border-radius: 8px;\n  resize: vertical;\n  font-family: inherit;\n}\n\n.sidebar .btn {\n  padding: 10px 12px;\n  border: none;\n  border-radius: 10px;\n  background: #111;\n  color: #fff;\n  cursor: pointer;\n  transition: background 0.2s;\n}\n\n.sidebar .btn:hover {\n  background: #333;\n}\n\n.sidebar .row {\n  display: flex;\n  gap: 8px;\n}\n\n.main {\n  display: grid;\n  grid-template-rows: 48px 1fr;\n}\n\n.toolbar {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 8px 12px;\n  border-bottom: 1px solid #eee;\n}\n\n.toolbar .btn {\n  padding: 6px 10px;\n  border-radius: 8px;\n  border: 1px solid #ddd;\n  background: #fafafa;\n  cursor: pointer;\n  transition: background 0.2s;\n}\n\n.toolbar .btn:hover {\n  background: #f0f0f0;\n}\n\n.toolbar input[type=\"text\"] {\n  padding: 6px 8px;\n  border: 1px solid #ddd;\n  border-radius: 8px;\n  min-width: 200px;\n  font-family: inherit;\n}\n\n.canvas-wrap {\n  position: relative;\n  background: #fbfbfd;\n}\n\nsvg {\n  width: 100%;\n  height: calc(100vh - 48px);\n  display: block;\n  cursor: grab;\n}\n\nsvg.dragging {\n  cursor: grabbing;\n}\n\n.territory {\n  fill: #f6f7fb;\n  stroke: #e5e7f0;\n  stroke-width: 1.5;\n}\n\n.territory-title {\n  font-size: 13px;\n  fill: #556;\n}\n\n.node {\n  fill: #fff;\n  stroke: #c8cdda;\n  stroke-width: 1.5;\n  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.08));\n  cursor: move;\n  transition: stroke 0.2s;\n}\n\n.node:hover {\n  stroke: #8b90a8;\n}\n\n.node.selected {\n  stroke: #4f46e5;\n  stroke-width: 2;\n}\n\n.node-label {\n  font-size: 12px;\n  fill: #334;\n  pointer-events: none;\n}\n\n.edge {\n  stroke: #b9bfd2;\n  stroke-width: 1.25;\n  marker-end: url(#arrow);\n}\n\n.inspector {\n  position: absolute;\n  right: 18px;\n  top: 18px;\n  width: 300px;\n  background: #fff;\n  border: 1px solid #eee;\n  border-radius: 12px;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.06);\n  padding: 12px;\n  display: grid;\n  gap: 10px;\n}\n\n.inspector h3 {\n  margin: 0;\n  font-size: 16px;\n}\n\n.inspector input,\n.inspector textarea,\n.inspector select {\n  width: 100%;\n  padding: 8px;\n  border: 1px solid #ddd;\n  border-radius: 8px;\n  font-family: inherit;\n}\n\n.inspector .btn {\n  padding: 8px 12px;\n  border: none;\n  border-radius: 8px;\n  background: #111;\n  color: #fff;\n  cursor: pointer;\n}\n\n.badge {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 4px 8px;\n  border: 1px solid #ddd;\n  border-radius: 999px;\n  font-size: 12px;\n  background: #fff;\n}\n\n.muted {\n  color: #667085;\n  font-size: 12px;\n}\n\n.error-banner {\n  position: fixed;\n  bottom: 20px;\n  left: 50%;\n  transform: translateX(-50%);\n  background: #fee;\n  color: #c33;\n  padding: 12px 20px;\n  border-radius: 8px;\n  border: 1px solid #fcc;\n  cursor: pointer;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  z-index: 1000;\n  animation: slideUp 0.3s ease;\n}\n\n@keyframes slideUp {\n  from {\n    opacity: 0;\n    transform: translateX(-50%) translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(-50%) translateY(0);\n  }\n}\n</style>\n","/**\n * Main entry point for Character Canvas Vue application\n * Initializes Vue 3 app with composable architecture\n */\nimport { createApp } from 'vue';\nimport App from './App.vue';\nimport './style.css';\n\n// Global error handler\nconst handleGlobalError = (err, instance, info) => {\n  console.error('Global Error:', err);\n  console.error('Component:', instance);\n  console.error('Error Info:', info);\n\n  // You can send to error tracking service here\n  // Example: Sentry.captureException(err);\n};\n\n// Create and configure Vue app\nconst app = createApp(App);\n\n// Register global error handler\napp.config.errorHandler = handleGlobalError;\n\n// Production tip (disable in production)\napp.config.performance = true;\n\n// Mount app\ntry {\n  app.mount('#app');\n  console.log('✓ Character Canvas initialized successfully');\n} catch (error) {\n  console.error('Failed to mount Vue app:', error);\n  document.querySelector('#app').innerHTML = `\n    <div style=\"padding: 20px; font-family: system-ui;\">\n      <h1 style=\"color: #c33;\">Application Failed to Load</h1>\n      <p>An error occurred while initializing the application.</p>\n      <pre style=\"background: #f5f5f5; padding: 10px; border-radius: 4px; overflow: auto;\">\n${error.stack || error.message}\n      </pre>\n      <button onclick=\"location.reload()\" style=\"padding: 10px 20px; border-radius: 6px; border: none; background: #111; color: #fff; cursor: pointer;\">\n        Reload Page\n      </button>\n    </div>\n  `;\n}\n"],"names":["territories","reactive","nodes","edges","chatInput","ref","swot","saveSnapshot","name","raw","history","data","error","loadSnapshot","index","snap","t","n","e","TERRITORY_PADDING","TERRITORY_HEADER","NODE_WIDTH","NODE_HEIGHT","NODE_SPACING_X","NODE_SPACING_Y","COLS_PER_TERRITORY","TERRITORY_SPACING","TERRITORY_COLS","calculateTerritoryDimensions","nodeCount","rows","width","height","positionNodeInTerritory","node","territory","indexInTerritory","col","row","x","y","maxX","maxY","finalX","finalY","runAnalysis","generateMap","response","mapData","llmNodes","llmEdges","dimensions","nodesPositioned","nodesOutside","position","useState","initView","viewBox","isPanning","lastPan","svgToWorld","svg","r","px","py","worldToScreen","sx","sy","onPanStart","onPanMove","dx","dy","onPanEnd","onWheel","event","rect","mouseX","mouseY","scaleFactor","worldMx","worldMy","newW","newH","zoomToNode","scale","duration","start","cx","cy","targetW","targetH","target","t0","step","p","useCanvas","selectedNode","quickNodeLabel","editingNode","dragging","nodeById","id","selectNode","deselectNode","quickAddNode","label","newNode","onNodeDragStart","onNodeDragMove","onNodeDragEnd","useNodes","_sfc_main","handleError","err","context","clearError","onErrorCaptured","instance","info","stateComposable","canvasComposable","nodesComposable","zoomPercentage","computed","handleSave","handleLoad","handleReset","handleNodeUpdate","zoomAtCenter","factor","centerView","onMounted","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_openBlock","_createElementBlock","_createElementVNode","_cache","$setup","$event","args","_vModelText","_toDisplayString","_Fragment","_renderList","_hoisted_11","_a","_b","_c","_d","_withModifiers","_normalizeClass","_hoisted_15","_hoisted_16","_vModelSelect","handleGlobalError","app","createApp","App"],"mappings":"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"}